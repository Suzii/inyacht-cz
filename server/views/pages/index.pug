extends ../page-layout
include ../mixins/newsPostPreview
include ../mixins/headerMetadata

block append meta
    +headerMetadata(item)

block content
    .container-fluid.no-padding
        .cover-video.no-padding#cover-video
            video(
            type="video/mp4"
            src="/img/cover-video.mp4"
            poster="/img/cover-poster.png"
            loop
            autoplay
            muted
            )

    .container-fluid.no-padding
        .row
            .col-sm-12
                .small-search__wrapper
                    h1#cover-video-heading
                        | #{item.coverVideoHeading.value}

                    .booking-manager__container--small.text-center
                        iframe#booking-manager(
                        width="100%"
                        frameborder="0"
                        scrolling="auto"
                        src=`https://www.booking-manager.com/wbm2/page.html?companyid=2957&setlang=cs&view=SmallSearchForm&target=_top&controllerPage=${controllerPage}&customCssPath=${bookingCssSm}`
                        allowTransparency="true"
                        )

block append scripts
    script.
      function positionSmallSearch() {
        var coverVideo = $('#cover-video');
        var coverVideoHeading = $('#cover-video-heading');
        var bookingManagerIframe = $('iframe#booking-manager');
        var bookingManagerContainer = $('.booking-manager__container--small');
        var smallSearchWrapper = $('.small-search__wrapper');


        var screenWidth = $(window).width();

        if (screenWidth < 560) {
          bookingManagerIframe.height(227);
        }
        else if (screenWidth < 620) {
            bookingManagerIframe.height(176);
        } else {
            bookingManagerIframe.height(125);
        }

        if (screenWidth < 768) {
          coverVideoHeading.removeClass('overlay');
          bookingManagerContainer.removeClass('overlay');
          smallSearchWrapper.removeClass('overlay').css({ top: 0 });
        } else {
          var iframeHeight = bookingManagerIframe.height();
          var videoHeight = coverVideo.height();
          var positionTop = -(videoHeight / 2 + iframeHeight / 2) - coverVideoHeading.height();

          coverVideoHeading.addClass('overlay');
          bookingManagerContainer.addClass('overlay');
          smallSearchWrapper.addClass('overlay').css({ top: positionTop });
        }
      };

      positionSmallSearch();
      $(window).resize(positionSmallSearch);
